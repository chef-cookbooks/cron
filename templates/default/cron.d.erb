# Crontab for <%= @name %> managed by Chef. Changes will be overwritten.
<% if @mailto -%>
MAILTO=<%= @mailto %>
<% end -%>
<% if @path -%>
PATH=<%= @path %>
<% end -%>
<% if @shell -%>
SHELL=<%= @shell %>
<% end -%>
<% if @home -%>
HOME=<%= @home %>
<% end -%>
<% @environment.each do |key, val| -%>
<%= key %>=<%= val %>
<% end -%>

<% if @comment -%>
# <%= @comment %>
<% end -%>
<% case @command -%>
<% when Hash -%>
<%   @command.each do |cmd, attributes| -%>
<%     case attributes -%>
<%     when Hash -%>
<%= (attributes['minute'] rescue false) ? attributes['minute'] : '*' %> <%= (attributes['hour'] rescue false) ? attributes['hour'] : '*' %> <%= (attributes['day'] rescue false) ? attributes['day'] : '*' %> <%= (attributes['month'] rescue false) ? attributes['month'] : '*' %> <%= (attributes['weekday'] rescue false) ? attributes['weekday'] : '*' %> <%= (attributes['user'] rescue false) ? attributes['user'] : 'root' %> <%= cmd %>
<%     else -%>
<%= attributes %> <%= cmd %>
<%     end -%>
<%   end -%>
<% else -%>
<%   if @predefined_value -%>
<%= @predefined_value %> <%= @user %> <%= @command %>
<%   else -%>
<%= @minute %> <%= @hour %> <%= @day %> <%= @month %> <%= @weekday %> <%= @user %> <%= @command %>
<%   end -%>
<% end -%>
